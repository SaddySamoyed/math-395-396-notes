\documentclass[lang=cn,11pt]{elegantbook}
\usepackage[utf8]{inputenc}
\usepackage[UTF8]{ctex}
\usepackage{amsmath}%
\usepackage{amssymb}%

\title{Math 395: Honor Analysis I}
\subtitle{Covering Anlysis on Manifold 2-5, instructed by Alex Wright}
\author{Qiulin Fan}
\date{2024 Fall}

\extrainfo{Notice that the note contain chunks of Chinese languages. I feel sorry if you could not read it cuz of that.}

\logo{assets/M.jpg}
\cover{assets/M.jpg}

% modify the color in the middle of titlepage
\definecolor{customcolor}{RGB}{32,178,170}
\colorlet{coverlinecolor}{customcolor}

\begin{document}

\maketitle
\frontmatter
\tableofcontents

\mainmatter

\chapter{Review of topology in $\mathbb{R}^n$}


\section{Compactness in $\mathbb{R}^n$}
\subsection{Finite Intersecion property and Heine-Borel}
\begin{theorem}
    \textbf{cpt 集的任意闭子集都继承 cpt 性.}
\end{theorem}

\begin{theorem}{Finite Intersecion property} \label{Finite Intersecion property}
   任意一堆(even unctbl个) cpt 集，只要知道它们中\textbf{任意有限个的交集都不是空的，那么它们整体的交集也不是空的. }
\end{theorem}


\begin{theorem}
    \textbf{Metric space 中，cpt 和 seq cpt 是等价的.}
    （但是一般的 topological space 中，并不等价且无蕴含关系）
    review: sequential compact 就是这个集合中的任意序列一定存在收敛子序列，并且收敛至这个集合中的一点.
\end{theorem}

\begin{theorem}{Nested Box property} \label{Nested Box property}
    这是 $\mathbb{R}^n$ 的一个性质。意思是 $\mathbb{R}^n$ 中的任意 nested 的闭区间的序列，$\cap_{i=1} ^\infty [a_i, b_i]$ 一定是非空的. (可能是一点，也可能是一个闭区间.) 
\end{theorem}

\begin{theorem}{Heine-Borel} \label{Heine-Borel}
    textbf{$\mathbb{R}^n$ 中，closed + bdd 等价于 cpt (等价于 seq cpt).} \\
（但是这个性质非常局限，因为它甚至不能推广至 metric space. 它在普遍的 metric space 中并不成立.）
\end{theorem}

一个重要例子：
\subsection{$l^{\infty}(\mathbb{N})$}

\begin{definition}{$l^{\infty}(\mathbb{N})$} \label{linfinity}
    所有 bouded sequence in $\mathbb{R}$ 构成的空间，其中 $\mathbb{N}$ 的意思是 index on自然数集，也可以取其他 countable 的集合来作为 index: $l^{\infty}(X)$ .
\end{definition}


这个空间采取\textbf{ $\sup$ norm metric：$d((x_n), (y_n)) = \sup_{n} |x_n - y_n| $. 也就是这两个 sequence 逐项差的 sup.}

这个 metric space 中的单位球是 closed 且 bounded 的(显然).  

BTW: 这个 $l^{\infty}(\mathbb{N})$ 空间也是一个 infinite dimension 的 vector space，我们在 LADR 中已经学过. 并且，我们可以给他赋范，也就是 sup norm 的由来：\textbf{$||x_n||_{\infty} = sup_{n}|x_n|$}，而它的 metric 其实是它的 sup norm induce 出来的. 这个 sup norm 其实就是这个序列和零序列之间的 sup norm metric. 

\textbf{并且，在 sup norm 下作为一个 normed vector space，它是一个 Banach space。
（hw1: 任意的 normed vector space 在 $d =  ||x-y||$ 下都是一个 metric space. 如果这个 norm 使得它是 complete metric space，那么就称之为一个 Banach space.）}

然而，这个单位球并不是 cpt 的。我们知道，metric space 中 seq cpt 等价于 cpt. 所以我们可以构造一个序列 in $B_1(0)$: 考虑 $((1,0,0,\cdots), (0,1,0,\cdots),(0,0,1,\cdots),\cdots)$ ，其中每个序列的第 $n$ 项是 1 其他都是 0. 很显然这个序列并没有收敛子序列，因为其中每一项和其他之间 $d_{\infty}$ 都是1. 所以它并不 cpt.


\section{Totally-Compactness and Completeness}
\subsection{cpt. = complte + ttlbdd.}
我们知道在 $\mathbb{R}^n$ 里面，cpt = seq cpt = closed + bounded.
但是\textbf{在一般的 metric space 里面，虽然还是有 cpt = seq cpt，却不等价于有界闭了。}

不过我们仍然希望把 cptness 这个 topology 的概念转换成更加直观的概念以服务于 analysis 的目的。Fortunately 这是可行的：我们现在定义

\begin{definition}{Totally Bounded} \label{ttlbdd}
    任取 $\epsilon > 0$，我们都可以用 finitely many 个 $\epsilon$-ball 来 cover 这个集合，则称它是 Totally Bounded 的.
\end{definition}

\begin{definition}{Complete (或称 Cauchy-complete)} \label{cplt}
    即这个集合中的任意 Cauchy sequence 都收敛（至这个集合里的某个点）
    \\Rmk: 我们知道 \textbf{metric space 的任意子集也是 metric space}，by induced metric.
\end{definition}

\begin{remark}
complete 即这个集合里任意 Cauchy 序列都收敛于它自己的某个点，ttl bounded 即对于任意半径都可以用有限个这样半径的球来覆盖这个集合.
\end{remark}



现在我们证明这个重要定理：
\begin{theorem}
    \textbf{任意 metric space 中，cpt = seq cpt = complete + ttl bounded}
\end{theorem}

\subsection{Lebesgue Covering Thm}
为了证明这个东西我们需要一个 Lemma，其实这个 Lemma 叫做 \textbf{Lebesgue Covering Thm}:  
\begin{lemma}{Lebesgue Covering Thm} \label{lbg covering thm}
    对于 cpt 的 $E$ ，取任意一个 open cover $\{U_{\alpha}\}$，都存在一个 $\epsilon > 0$ 使得对于 $E$ 中的任何一点 $p$，$B_{\epsilon}(p)$ 都被包含在某个 $U_{\alpha}$ 中.
\end{lemma}
\proof 这个定理其实非常直观。因为 compact 一定有 finite subcover. 既然是 finite 的，那么任意一个 cover set 和集合或其他 cover set 边缘擦边的地方一定是有限的。既然 $E$ 是 compact 的那么一定是 complete 的那么当然也是 closed 的，于是取这些 finite 个擦边的地方里面最擦边的地方作为 $\epsilon$ 就可以了.

\begin{remark}
    显然，metric space 中 \textbf{complete 蕴含 closed，ttl bdd 蕴含 bdd}，而特别地， $\mathbb{R}^n$ 中的任意集合，closed 等价于 complete，ttl bdd 等价于 bdd.
\end{remark}

\begin{theorem}
    \textbf{complete 的 metric space 的任意 closed subset 一定也是 complete 的}. 显然.
\end{theorem}
complete 的 metric space 的任意 closed subset（我们知道 metric space 的任意子集也是 metric space，by induced metric.）一定也是 complete 的. 显然.

\begin{remark}
    我们在 lec 1 中讲到  $l^{\infty}(\mathbb{N})$ 中的单位球是 closed + bdd 但是不 compact. 由于这是一个 Banach space 它也是 complete 的，by 3；不过它的问题出在并不是 ttl bdd 的.
\end{remark}


\section{IBL1: density and Baire Category Theory}

\begin{remark}
    Fun fact: 在 discrete metric 下，$\mathbb{R}^n$ 中的单位闭球并不是单位球的 closure. 单位球的 closure 是整个 $\mathbb{R}^n$.
\end{remark}


\begin{theorem}{Baire Category Theory} \label{Baire Category Theory}
    对于一个\textbf{ complete metric space，任意一个 sequence of open dense sets 的序列交还是 dense 的.}
\end{theorem}

通过 Baire Category Theory 可以证明出一个推论
\begin{corollary}
    \textbf{如果一个 complete metric space 自身是一个 perfect set，那么它一定是 uncountable 的. }
    \\Rmk: perfect set 即它的 limit pts 集合等于它自身
\end{corollary}

   这个东西看起来非常废话。但是我们在 IBL 2 的 proposition 1 中会发现它有用的（\textbf{Cantor set 就是一个 complete perfect metric space，所以它是 uncountable 的}）


\section{IBL 2: 定义 measure 的动机和尝试}

\noindent 我们知道\textbf{ Cantor set 是一个 compact 且 closed 的集合（甚至 perfect }）（并且由于它在  $\mathbb{R}^n$ 中，\textbf{这表示它甚至是一个 complete metric space}）；并且它 uncountable；然而它却不包含任何开区间（我们知道它的 \textbf{Lebesgue measure = 0}）.

\noindent 我们想要测量一个 $\mathbb{R}^n$ 子集的“长度”。我们想要这个测量函数满足：

\begin{enumerate}
    \item  可数个集合的 measure closed under addition;
    \item  Congruent (通过 translate 或者旋转或者反射) 的集合的 measure 相同; 
    \item  精准地测量出 $m([0,1)) = 1$. 
\end{enumerate}


\noindent 但是实际上我们发现不可能存在这样的函数. 
\noindent 归谬过程：
   \begin{enumerate}
       \item   我们把 $[0,1)$ 之间所有可以通过加减有理数得到的元素都归为一个 congurent class (很直观地说，所有的有理数都会进入一个 congruent class，而最简根数不同的无理数以及各种 transcendental numbers 会形成各自的 congruent classes.)
       \item  把 $[0,1)$ 之间的所有有理数放进一个集合 $R$，在每个 congruent class 中取一个元素，放进一个集合 $N$，我们会发现：任取 $r \in R$，通过把 $N$ 整体地 translate $r$ 个大小并把放不下的放到左边（也就是一个 circular translate），我们得到 $N_r$，会发现 $\bigsqcup_{r} N_r = [0,1)$；并且每个 $N_r$ 的 measure 都是一样的.
       \item   如果 $m(N)$ 不等于 0，那么 $m([0,1)) = \infty$；如果 $m(N)$ = 0，那么 $m([0,1)) = 0$；
   \end{enumerate}

\section*{Hw2}
\subsection{Normed vector space}
\begin{definition}
    \textbf{normed vector space:} 
    \\vector space 上可以定义 norm 来表示每个 vector 的“大小”，norm 的定义是满足 \textbf{(1) positive definiteness; (2) homogeneity (3) triangle ineq 的 $||.||: V \rightarrow \mathbb{R}_{\geq0}$}
\end{definition}

\paragraph{Continutity on normed VS as a MS:} 对于两个 normed vector spaces 之间的 linear map，实际上是可以定义 continuous 的概念的。\textbf{我们可以用 $||T(v) - T(w)||_2 \rightarrow 0$ as $||v - w||_1 \rightarrow 0$} （或者 sequentially）来定义 \textbf{continuous by norm}.

\paragraph{induced norm on $Hom(V_1, V_2)$}: 给定两个 normed vector spaces $V_1, V_2$，我们实际上也 induce 出了 $Hom(V_1, V_2)$ 上的一个 norm. 

\begin{definition}
   \textbf{bounded linear map:} \\
   我们可以用 
   $$||T|| = \sup_{v \in V_1, ||v|| != 0} \frac{||Tv||_2}{||v||_1}$$
   来定义 \textbf{$T \in Hom(V_1, V_2)$ 的 norm}.
   \\当这个 norm 不是无穷时，称这个 linear map bounded.
\end{definition}
   
\paragraph{Finite dim VS 上 linear map bdd 且 ctn}
\begin{theorem}
    (1) \textbf{linear map bounded 当且仅当它 continuous.}
    (2)  \textbf{有限维度的 vector space 之间的任意 linear map 一定 bounded（}因为一定可以选择 base 然后把线性变换用 matrix 来表示），所以一定 continuous.
\end{theorem}

\begin{remark}
    一个涉及 infinite dimension 的 vector space 的 unbounded linear map 的例子: $$T = \frac{d}{dx}|_{x=0} \in Hom(C[0,1], \mathbb{R})$$
\end{remark}


\subsection{$l^{\infty}(\mathbb{N})$ space}

1. $l^{\infty}(\mathbb{N})$ 中的所有收敛到 0 的序列构成的集合，称之为 $l_0^{\infty}(\mathbb{N})$，这个集合 \textbf{$l_0^{\infty}(\mathbb{N})$ 从 bdd 提升到 ttl bdd 所需要的条件是其中所有序列是uniformly收敛的.}

\subsection{separable(exists ctb dense subset) metric space}

\begin{remark}
    如果一个 metric space $X$ 是 separable 的，那么随意 enumerate 一个 dense sequence $(p_n)$，这个 sequence 的所有 subsequential limit 就是整个 $X$. 即对于 $X$ 中任意一个元素，都可以找到 $(p_n)$ 的一个 subsequence 使得它的 limit 是整个元素
\end{remark}


\begin{theorem}
    \textbf{一个 ttl bdd 的 (subset as) metric space 一定是 separable 的.}
\end{theorem}

\begin{definition}
    \textbf{isometric embedding}: \\
    如果两个 metric space 之间的一个 map\textbf{ 保留 distance (即 $\forall x,y \in X, $ $d(f(x), f(y)) = d(x,y)$)} 那么就称这个 map 为一个 isometric embedding.
\end{definition}

\begin{theorem}
    \textbf{任意 separable metric space 都可以 embedds isometrically into $l^{\infty}(\mathbb{N})$.}
\end{theorem}

\proof 构造：首先 enumeate  $X$ 的一个 dense sequence $(p_n)$，并取它的首项 $p_1$，然后对于每个 $x \in X$， induce 出 $(d_X(x, p_n) - d_X(p_0, p_n))_{n \in \mathbb{N}}$ 这个序列. 可以发现从 $f: x \mapsto (d_X(x, p_n) - d_X(p_0, p_n))_{n \in \mathbb{N}}$ 是一个 isometry embedding. 

\chapter{Differentiation}
\section{Differentiation on $\mathbb{R}^n$}
\subsection{Continuity in MS}
\begin{remark}
    continuity 的定义: \textbf{open set 的 preimage 只能是 open set；等价于 closed set 的 preimage 只能是 closed set}
\end{remark}


\begin{theorem}
任意\textbf{ topological space 之间的连续映射} $ f:X \rightarrow Y$，\textbf{compact set 的 image 一定 compact}.
\end{theorem}

\begin{theorem}
任意 \textbf{topological space 之间的连续映}射 $f:X \rightarrow Y$，如果 \textbf{X compact，那么这个映射是 uniformly ctn 的}.（逆命题不成立）
\end{theorem}

\begin{definition}
    \textbf{$l_p$ norm on vector spaces:}\\
$$||v||_p = (\sum_{i = 1}^n |v_i|^p)^{1\over p}$$
\end{definition}

\begin{theorem}
    在\textbf{有限维 real vector space} （真包含 $\mathbb{R}^n$）中，\textbf{任意 $l_p$ norm 都等价}（无限维则不等).\\
    具体即：
    \begin{enumerate}
        \item 对于任意 $p_1, p_2$，都存在 $C_1, C_2$ 使得对于所有 $v\in V$:
        $$
        C_1||v||_{p_1} \leq ||v||_{p_2} \leq C_2||v||_{p_1}
        $$
        \item 任意 $l_p$ norm (通过差 norm 作为 metric) 定义出的\textbf{有限维 topological vector space 都是等价的}，于是它们在 continuity, differentiability 以及 convergence 等等概念上的形式都是一样的.
    \end{enumerate}
\end{theorem}

\subsection{Derivative}
\noindent 阐明了这件事情之后我们看欧式空间之间 differentiability 的定义：一个 $f: U \subset \mathbb{R}^n \rightarrow \mathbb{R}^m$ 在某个点 $x_0$ 上 diffble 的定义就是 \textbf{在 $x_0$ 上可以被某个 $Hom(\mathbb{R}^n, \mathbb{R}^m)$ 上的某个 Linear map 一阶近似，并且这个近似在 x 点附近 converge by norm（误差的下降速度 $>>$ 邻域的收缩速度）}
即：
\begin{definition}{Derivative} \label{derivartive}
    $$
    Df(x_0) \in \mathbb{R}^{m \times n} \text{ is the matrix } A \text{ such that } \lim_{||h|| \rightarrow 0} \frac{||f(x_0 + t) - f(x_0) - Ah||}{||h||} = 0
    $$
    注意这里的 $Df$ operator 是一个函数:
    $$
    Df : E \rightarrow Hom(R^n, R^m)
    $$
\end{definition}

我们可以由原函数和 derivative induce 出一个 remainder 函数，来表示在某点处 derivative 的 linear approximation 的误差程度随微小量 $h$ 变化的变化. 

\begin{definition}
我们定义 remainder function: (用来做分析时使用)
\begin{align}
    r_{x_0} : \mathbb{R}^n &  \rightarrow \mathbb{R}^m \\
    h & \mapsto f(x_0 + h) - f(x_0) - Df(x_0) \cdot h
\end{align}
\end{definition}

\noindent 对于任意的 $x_0$，总是有 $||\frac{r_{x_0}(h)}{h}|| \rightarrow 0$ as $h \rightarrow 0$，因而 $r(h)$ 是 $o(h)$ 的.

\begin{theorem}{$\mathbb{R}^n \rightarrow \mathbb{R}^m$ is similar to $\mathbb{R}^n \rightarrow \mathbb{R}$} \label{$f$ ctn/diff iff $f_i$ ctn/diffble for all $i$}
    For $$f: \mathbb{R}^n \rightarrow \mathbb{R}^m = \begin{pmatrix}
        f_1 \\ f_2 \\ \vdots \\ f_m
    \end{pmatrix}
    $$ we always have
    $f$ ctn/diff iff $f_i$ ctn/diffble for all $i$
\end{theorem}
意思是在证明可导/连续时我们总是可以只考虑 $m=1$ 的情况. 这件事非常有用.

\section{Directional Derivative}
\begin{definition}
    固定一个 $u \in \mathbb{R}^n$，define 
    \begin{align}
        D_u f(X_0) : \mathbb{R}^n & \rightarrow \mathbb{R}^m\\
        x & \mapsto \lim_{t\rightarrow 0, t\in \mathbb{R}} \frac{f(x + tu) - f(x)}{t}
    \end{align}

        Notice that:
        $$
        D_u f(x_0) = \frac{d}{dt}\bigg| _{t=0} f(x_0 + tu)
        $$
\end{definition}


\begin{proposition}{Intuition of Directional Derivative}
我们发现，实际上 $D_v f$ 和 $f$ 是来自同一个 function space $\mathcal{F}(\mathbb{R}^n, \mathbb{R}^m)$ 的.\\
实际上，$D_v f$ 描述的对于每个 $x \in dom(f)$，在点 $x$ 处 $f$ 在 $v$ 这个方向上的变化率. 这里 $f$ 才是变量，$v$ 是固定的。\\
$D_v f$ 对每个(存在该 directional derivative)的 $x \in dom(f)$ 都给出了一个 $\mathbb{R}^m$ 数值，对应 $f(x)$ 的值给出了 $f$ 在方向 $v$ 上的变化率 $D_v f(x)$. 所以整个 $D_v f$ 就是 $f$ 对应的一个变化率函数.
\end{proposition}

\begin{remark}
    $\mathbb{R}^n$ 是一个 vector space. 我们自然想到，如果知道每个 $e_i$ 方向上 $f$ 对应的变化率函数 $D_{e_i} f$，那么就知道了整体 $f$ 在各个方向上的变化率函数. 我们对这个函数投一个点 $x = c_1 e_1 + \cdots + c_n e_n \in dom(f)$:
    $$
    Df(x_0)(x) = \sum_{i=1}^n c_i D_{e_i} f(x_0) 
    $$
    就可以得到这点上 $Df(x_0)$ 的作用.
\end{remark}

\noindent 我们有一个专门的称呼来指代 $D_{e_i} f$
\begin{definition}{partial derivative} \label{partial derivative}
    我们使用 $\frac{\partial }{ \partial x_i} f$ 来表示 $D_{e_i} f$
\end{definition}

接着刚才的 remark，我们发现
\begin{theorem}
    如果 $f $ 在 $x_0 \in dom(f) $ 处 diffble，那么它在 $x_0$ 处的 derivative 为：
    \begin{align}
        Df(x_0) 
        & = \begin{pmatrix}
        \frac{\partial f_1}{\partial x_1} (x_0)& \frac{\partial f_1}{\partial x_2}(x_0) & \cdots & \frac{\partial f_1}{\partial x_n}(x_0) \\
        \frac{\partial f_2}{\partial x_1} (x_0)& \frac{\partial f_2}{\partial x_2}(x_0) & \cdots & \frac{\partial f_2}{\partial x_n}(x_0) \\
        \vdots & \vdots & \ddots & \vdots \\
        \frac{\partial f_m}{\partial x_1}(x_0) & \frac{\partial f_m}{\partial x_2} (x_0)& \cdots & \frac{\partial f_m}{\partial x_n}(x_0)
        \end{pmatrix}
    \end{align}

    其中每一列就是 $D_{e_i} f(x_0) = \frac{\partial}{\partial x_i} f(x_0)$. 因而对于每个输入 $ c \in \mathbb{R}^n$，我们得到的输出都是 $\sum_{i=1}^n c_i \frac{\partial}{\partial x_i} f(x_0) \in \mathbb{R}^m$.\\
    
    \begin{align}
        Df(x_0) (c)
        & = \begin{pmatrix}
        \sum_{i=1}^n c_i \frac{\partial}{\partial x_i} f_1(c) \\
        \sum_{i=1}^n c_i \frac{\partial}{\partial x_i} f_2(c) \\
        \vdots  \\
        \sum_{i=1}^n c_i \frac{\partial}{\partial x_i} f_n(c)
        \end{pmatrix}
    \end{align}
我们称这个 matrix 为 $f$ 的 \textbf{Jacobian matrix at $x_0$}
\end{theorem}

\begin{remark}
    $$
        Df: A \subset \mathbb{R}^n \rightarrow \text{Hom}(\mathbb{R}^n, \mathbb{R}^m) 
    $$
    $$
        x \mapsto 
        \begin{pmatrix}
        \frac{\partial f_1}{\partial x_1} (x)& \frac{\partial f_1}{\partial x_2}(x) & \cdots & \frac{\partial f_1}{\partial x_n}(x) \\
        \frac{\partial f_2}{\partial x_1} (x)& \frac{\partial f_2}{\partial x_2}(x) & \cdots & \frac{\partial f_2}{\partial x_n}(x) \\
        \vdots & \vdots & \ddots & \vdots \\
        \frac{\partial f_m}{\partial x_1}(x) & \frac{\partial f_m}{\partial x_2} (x)& \cdots & \frac{\partial f_m}{\partial x_n}(x)
        \end{pmatrix}
    $$
    \textbf{显然，如果在 $A$ 上每个 partial derivative 都是 continuous 的，那么这个 $Df$ 也是 continuous 的（if we define norm on $\text{Hom}(\mathbb{R}^n, \mathbb{R}^m) $}
\end{remark}

\begin{definition}{higher-order partial derivatives}
    我们知道 $f: \mathbb{R}^n \rightarrow \mathbb{R}^m$ 的任意 partial derivative ${\partial \over \partial x_i} f: \mathbb{R}^n \rightarrow \mathbb{R}^m$ 仍然是一个 $\mathbb{R}^n \rightarrow \mathbb{R}^m$ 的函数. 我们再对这个函数求 $e_j$ 方向上的 partial derivatve，可以得到另一个 ${\partial^2 \over \partial x_j \partial x_i} f: \mathbb{R}^n \rightarrow \mathbb{R}^m$.\\
    recursively define: 
    $$
    {\partial^d \over \partial x_{k_d}\partial x_{k_{d-1}}\cdots \partial x_{k_1}} = \frac{\partial }{\partial x_{k_d}}[{\partial^{d-1} \over \partial x_{k_{d-1}}\partial x_{k_{d-2}}\cdots \partial x_{k_1}}]
    $$
    为一个 $d^\text{th}$-oder 的 partial derivative of $f$
\end{definition}
\begin{remark}
    只有 partial derivative 是有多阶的，而 derivative $D$ 也急速hi全导数是没有多阶的，因为它本身就是一个 linear map. 因为 $f: \mathbb{R}^n \rightarrow \mathbb{R}^m$ 的任意阶段偏导数也是 $\mathbb{R}^n \rightarrow \mathbb{R}^m$ 的，但是全导数是一个从元素到线性变换的函数.\\
    我们平时使用的单变量real-valued函数的高阶导数是 partial derivative 的特殊情况，这是在 $\mathbb{R} \rightarrow \mathbb{R}$ 上的函数只有一个变量，全导数和偏导数是同一个函数.
\end{remark}

\section{$C^r$ class}
\begin{definition}{$C^r$ class}
    如果在 $A \subset \text{dom}(f)$ 上， $f$ 的所有 $r^\text{th}$-order partial derivatives 都 \textbf{exist 并且 ctn}，则称 $f \in C^r(A)$.
    \\如果对于任意 $r \in \mathbb{N}$ 都有 $f \in C^r(A)$，则称 $f \in C^{\infty}$
\end{definition}


\begin{remark}
    $f \in C^{r+1}(A) \Leftrightarrow $ all partials of $f$ are in $C^r(A)$
\end{remark}



    如果 f 在点 $x$ 附近 being $C^1$: $f$ 在点 $x$ 附近，每个 $e_i$ 切向量上的变化率函数都是连续的. 所以我们有一种直觉：$f$ 在这个点上是可以被一个 linear map 近似的.

\begin{theorem}{Sufficient condition for $f$ differentiable at some point}
    如果 $f: \mathbb{R}^n \rightarrow \mathbb{R}^m$ 在点 $x_0$ 附近是 $C^1$ 的，那么它在 $x_0$ 上是 differentiable 的 (即 $Df(x_0)$ exists.\\
    (Note: 此时在 $x_0$ 附近 $Df: A \subset \mathbb{R}^n \rightarrow \text{Hom}(\mathbb{R}^n, \mathbb{R}^m) $ 也是 continuous 的.)
\end{theorem}
\begin{proof}
见L05.
\end{proof}

\begin{remark}
    因而如果 $f \in C^1(dom(f))$, $f$ 就是 differentiable 的函数.
\end{remark}


\begin{theorem}{Mixed partials}
    If $f$ is $C^2$ 则任取 $x \in \text{dom}(f)$，$f$ 在 $x$ 处的任意 $2^\text{nd}$-order partial 可以更换次序. 即:
    $$
    {\partial^2 \over \partial x_{j_1} \partial x_{j_2}}f(x_0) = {\partial^2 \over \partial x_{j_2} \partial x_{j_1}} f(x)
    $$
\end{theorem}
\begin{proof}
    见 L06.\\
    对于这种 multivariable 的关于 diffbility/ ctnity 的证明，我们总是应该想到把它先等价为 $\mathbb{R}^n \rightarrow \mathbb{R}$，然后再对 $n$ 个变量进行逐个处理，运用 single variable analysis 的各种 mean value theorem 来处理.
\end{proof}


\begin{corollary}{Mixed partials}\label{Mixed partials}
    自然可以得到：如果 $f \in C^r(A)$，那么 $f$ 的任意 $r$ 阶及以下阶 partial derivative 都可以换序. 即: $\forall m \leq r$ 以及 $\forall \pi \in S_m$:
    $$
     {\partial^m \over \partial x_{k_1}\partial x_{k_{2}}\cdots \partial x_{k_m}} = {\partial^m \over \partial x_{k_{\pi(1)}}\partial x_{k_{\pi(2)}}\cdots \partial x_{k_{\pi(m)}}}
    $$
    因而如果 $f\in C^\infty (A)$ 那么所有的 partial derivative 都可以换序.
\end{corollary}


\section{Chain Rule, Product Rule and Taylor's theorem}
\begin{definition}{multi-index notation} \label{multi-index}
一个 multi-index 是一个 $n-$tuple，其中每个 entry 都是一个 non-neg integer.\\
我们使用以下四个 notation 来进行简写:\\
$$
|\alpha| = \sum_{j = 1}^n \alpha_j
$$
$$
\alpha! = \prod_{i = 1}^n (\alpha_j !)
$$
$$
x^{\alpha} = {x_1}^{\alpha_1}{x_2}^{\alpha_2} \cdots {x_n}^{\alpha_n}
$$
$$
\partial ^ \alpha f ={\partial^{|\alpha|} \over (\partial {x_1})^{\alpha_1} (\partial {x_2})^{\alpha_2} \cdots (\partial {x_n})^{\alpha^n}} f  
$$
\end{definition}
这个 notation 的引入会使得很多定理的表述简洁很多.
\begin{example}
$$
\partial ^{(2,1)} f = \frac{\partial^3}{\partial x_1 \partial x_2 \partial x_3 } f
$$
$$
(3,3,0)! = 3!3!0! = 36
$$
\end{example}


\subsection{Chain Rule}
\noindent Recall chain rule in single variable analysis:
$$f: A \subset \mathbb{R} \rightarrow B \subset \mathbb{R} \;\; \text{, } g: B \rightarrow \mathbb{R} 
$$
with A, B open; $f$ is diffble at some point $x$ and $g$ is diffble at $f(x)$.\\
Then we have: 
$$
\frac{d}{dx} (g \circ f) (x) = g'(f(x)) f'(x)
$$

现在我们有 multi 的版本:
\begin{theorem}
    如果 $$f: A \subset \mathbb{R}^n \rightarrow B \subset \mathbb{R}^m \;\; \text{, } g: B \rightarrow \mathbb{R}^p 
$$
with A, B open; $f$ is diffble at some point $x$ and $g$ is diffble at $f(x)$.\\
Then we have:
$$
D (g \circ f) (x) =Dg(f(x))\, Df(x)
$$
\end{theorem}
和 single varable 的表述基本一模一样.
\begin{proof}
    见 L07. 证明思路即取 $f,g, g\circ f$ 的 remainder function 并发现在 $R_f, R_g$ 趋向 0 时 $R_{g\circ f}$ 也趋向 0.
\end{proof}

\subsection{Multinomial Theorem}
\begin{theorem}{Multinomial Thm} \label{Multinomial Thm}
$\forall (x_1, x_2, \cdots, x_n) \in \mathbb{R}^n$ 以及任意 $k \in \mathbb{Z}_{\geq 0}$ we have:
$$
{(x_1 + \cdots + x_n)}^k  = \sum_{|\alpha| = k} \frac{k!}{\alpha !} x^\alpha 
$$
\end{theorem}
这是一个 combinatorics 的 proposition. 
\begin{proof}
    (Informal proof, but sufficient to show it.)\\
    ${(x_1 + \cdots + x_n)}^k$ 每项就是每次在 $\{x_1, x_2, \cdots, x_n\}$ 中取一个元素，取 $k$ 次得到，一共有 $\sum_{|\alpha| = k} \frac{k!}{\alpha !} = k!$ 个项，每一项都是一个 $x^\alpha$ where  $|\alpha| = k$.\\
    每个 $x^\alpha$ 会被取到重复次，这个重复的数量为 ${k! \over \alpha !}$\\
     因为 $k! \over \alpha !$ 就是把一个 size 为 $k$ 的 set 分成 size 分别是 $\alpha_1, \cdots, \alpha_n$ 的子集的方法.\\
     推导: 
$$
\# =  C^k_{\alpha_1} \times  C^{k-\alpha_1}_{\alpha_2}  \times C^{k-\alpha_1 - \alpha_2}_{\alpha_3} \times\cdots \times C^{k - \sum_{i=1}^{n-1} \alpha _i}_{\alpha_n} = {k! \over \alpha_1! \alpha_2 ! \cdots \alpha_n !}
$$
    （对于 for example:  $\alpha = \{1,0,2,2,0\}$ 即 $x_1 {x_3}^2 {x_4}^2$ 这一项，会被取到 ${k! \over \alpha !} = \frac{5!}{2!2!}$ 次. 这个次数等于$ 5 \times C^4_2 \times C^2_2 $ ）
    \\ formal 的证明即 by induction，使用 binomial thm 即可.
\end{proof}

\subsection{Product Rule}
\begin{theorem}{product rule} \label{product rule}
$\forall \alpha \in \mathbb{N}_{\geq 0}^n$，$f,g: \mathbb{R}^n \rightarrow \mathbb{R}$, 都有：
$$
\partial^{\alpha} (fg) = \sum_{\beta + \gamma = \alpha} \frac{\alpha !}{\beta ! \gamma !} (\partial ^ \beta f) (\partial ^ \gamma g)
$$
\end{theorem}


















\end{document}